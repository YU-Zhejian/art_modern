#!/usr/bin/make -f
export DEB_BUILD_MAINT_OPTIONS = hardening=+all
include /usr/share/dpkg/default.mk
include debian/shared.mk

override_dh_auto_configure:
	dh_auto_configure -- \
    -Wdev -Wdeprecated --warn-uninitialized \
    -DCEU_CM_SHOULD_USE_NATIVE=OFF \
    -DCEU_CM_SHOULD_ENABLE_TEST=ON \
    -DUSE_THREAD_PARALLEL=ASIO \
    -DUSE_MALLOC=NOP \
    -DUSE_RANDOM_GENERATOR=STL \
    -DCMAKE_BUILD_TYPE=RelWithDebInfo \
    -DCMAKE_INSTALL_LIBDIR=lib/art-modern \
    -DCMAKE_INSTALL_INCLUDEDIR=include/art-modern/include \
    -DUSE_HTSLIB=hts \
    -DUSE_LIBFMT=fmt \
    -DUSE_CONCURRENT_QUEUE="$(USE_CONCURRENT_QUEUE_PATH)" \
    -DUSE_ABSL=SYSTEM \
    -DREPRODUCIBLE_BUILDS=ON

override_dh_installdocs: debian/art_modern.1 debian/art_profile_builder.1
	dh_installdocs
